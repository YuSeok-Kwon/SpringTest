<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css"
    />
    <link rel="stylesheet" href="/ajax/style.css"/>
    <title>권무무 펜션</title>
  </head>
  <body>
    <div class="container">
      <header class="d-flex justify-content-center align-items-center">
        <h1 class="fw-light">권무무 펜션</h1>
      </header>

      <main>
        <nav>
          <ul class="nav nav-fill">
            <li class="nav-item">
              <a href="/booking/mainpage" class="nav-link text-white">펜션소개</a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link text-white">객실보기</a>
            </li>
            <li class="nav-item">
              <a href="/booking/createpage" class="nav-link text-white">예약하기</a>
            </li>
            <li class="nav-item">
              <a href="/booking/listpage" class="nav-link text-white">예약목록</a>
            </li>
          </ul>
        </nav>

        <div class="contents">
          <div id="banner" class="banner d-flex" style="overflow: hidden">
            <img
              id="bannerImg"
              src="http://marondal.com/material/images/dulumary/web/front/jquery/test06_banner1.jpg"
              alt="펜션 사진"
              class="banner-img"
            />
          </div>

          <div class="main-contents d-flex">
            <div
              id="reservationInfo"
              class="reservationInfo col-4 d-flex justify-content-center align-items-center"
            >
              <button
                id="reservationBtn"
                class="reservation-btn btn text-white fw-light"
              >
                실시간<br />예약하기
              </button>
            </div>

            <div id="checkReservation" class="checkReservation col-5">
              <div class="d-flex align-items-center mx-3 my-2">
                <h3 class="m-2">예약 확인</h3>
                <label for="memberRadio" class="m-2"> 회원 </label>
                <input
                  type="radio"
                  id="memberRadio"
                  name="type"
                  value="member"
                  checked
                />
                <label for="noneMemberRadio" class="m-2"> 비회원 </label>
                <input
                  type="radio"
                  id="noneMemberRadio"
                  name="type"
                  value="noneMember"
                  checked
                />
              </div>

              <div class="login-input mx-4">
                <div id="idDiv" class="id-input form-group mb-3 d-none">
                  <label>아이디 : </label>
                  <input
                    type="text"
                    name="idInput"
                    class="form-control"
                    id="idInput"
                  />
                </div>
                <div id="nameDiv" class="name-input form-group mb-3 ">
                  <label>성함 : </label>
                  <input
                    type="text"
                    name="nameInput"
                    class="form-control"
                    id="nameInput"
                  />
                </div>

                <div id="passwordDiv" class="password-input form-group d-none">
                  <label>비밀번호 : </label>
                  <input
                    type="password"
                    class="form-control"
                    id="passwordInput"
                  />
                </div>
                <div
                  id="phonenumberDiv"
                  class="phonenumber-input form-group mb-3"
                >
                  <label>전화번호 : </label>
                  <input
                    type="text"
                    name="phonenumberInput"
                    class="form-control"
                    id="phonenumberInput"
                  />
                </div>
              </div>

              <div class="d-flex justify-content-end me-3">
                <button
                  type="button"
                  class="btn bg-success text-white m-2"
                  id="searchBtn"
                >
                  조회하기
                </button>
              </div>
            </div>

            <div
              id="reservationCall"
              class="reservation-call col-3 d-flex align-items-center justify-content-center"
            >
              <div class="fw-bold fs-3">
                예약문의 : <br />
                010-<br />
                5228-7948
              </div>
            </div>
          </div>
        </div>
      </main>
      <footer>
        <div class="copyright m-3">
          경기도 화성시 동탄순환대로 10길 42<br />
          사업자등록번호 : 123-456-78901 / 권무무사랑단지정 / 대표:권유석<br />
          copyright 2025 kwonmumu All right reserved
        </div>
      </footer>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js"
      integrity="sha512-LsnSViqQyaXpD4mBBdRYeP6sRwJiJveh2ZIbW41EBrNmKxgr/LFZIiWT6yr+nycvhvauz8c2nYMhrP80YhG7Cw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
    <script>
     

      $(function () {
    	  $("#searchBtn").on("click", function(){
    		  let name = $("#nameInput").val();
    		  let phoneNumber = $("#phonenumberInput").val();
    		  
    		  $.ajax({
    			  type : "get"
    			  , url : "/booking/checking"
    			  , data : {"name":name, "phoneNumber":phoneNumber}
				  , success : function(response){
						if(response.result == "success"){
							alert(
					                "이름 : " + response.data.name +
					                "\n날짜 : " + response.data.date +
					                "\n일수 : " + response.data.day +
					                "\n인원 : " + response.data.headCount +
					                "\n상태 : " + response.data.state
					            );
							} else {
							alert("예약된 내용이 존재하지않습니다.");
						}
					}
				  , error : function(){
					  alert("조회 에러!");
				  }
    		  })
    	  })
    	  
    	  
        let bannerImages = [
          "http://marondal.com/material/images/dulumary/web/front/jquery/test06_banner1.jpg",
          "http://marondal.com/material/images/dulumary/web/front/jquery/test06_banner2.jpg",
          "http://marondal.com/material/images/dulumary/web/front/jquery/test06_banner3.jpg",
          "http://marondal.com/material/images/dulumary/web/front/jquery/test06_banner4.jpg",
        ];

        let currentIndex = 0;

        setInterval(() => {
          currentIndex = (currentIndex + 1) % bannerImages.length;
          $("#bannerImg").attr("src", bannerImages[currentIndex]);
        }, 3000);

        $("input[type=radio]").on("change", function () {
          if ($(this).val() == "noneMember") {
            $("#idDiv").addClass("d-none");
            $("#passwordDiv").addClass("d-none");
            $("#nameDiv").removeClass("d-none");
            $("#phonenumberDiv").removeClass("d-none");
            $("#dateDiv").removeClass("d-none");
          } else if ($(this).val() === "member") {
            $("#idDiv").removeClass("d-none");
            $("#passwordDiv").removeClass("d-none");
            $("#nameDiv").addClass("d-none");
            $("#phonenumberDiv").addClass("d-none");
            $("#dateDiv").addClass("d-none");
          }
        });

        $("#searchBtn").on("click", function () {
          let type = $("input[name=type]:checked").val();
          if (type === "member") {
            let idInput = $("#idInput").val();
            let passwordInput = $("#passwordInput").val();
            if (!idInput) {
              alert("아이디를 입력하세요");
              return;
            }
            if (!passwordInput) {
              alert("비밀번호를 입력하세요");
              return;
            }
          } else if (type === "noneMember") {
            let nameInput = $("#nameInput").val();
            let phonenumberInput = $("#phonenumberInput").val();
            if (!nameInput) {
              alert("이름을 입력하세요");
              return;
            }
          
           
          }
        });
      });
    </script>
  </body>
</html>
